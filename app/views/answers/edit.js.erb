var bestButton = {}
bestButton = document.querySelector('#button-best-answer-<%= @answer.id %>');
var cancelButton = {}
cancelButton = document.querySelector('#cancel-edit-<%= @answer.id %>')
var linkSection = {}
linkSection = document.querySelector('#answer-link_<%= @answer.id %>')

prependInlineForm()

<% if @answer.errors.present? %>
  document.querySelector('.answer-error-<%= @answer.id %>').innerText = ''
  document.querySelector('.answer-error-<%= @answer.id %>').insertAdjacentHTML('beforeend', '<%= errors_for(@answer) %>');
<% else %>
  <% return unless @answer.persisted? %>
<% end %>


if (cancelButton) {
  cancelButton.addEventListener("click", function(event) {
    event.preventDefault()
    revertJumbotronForm()
  });
}

function prependInlineForm() {
  if (document.querySelector('.answer_<%= @answer.id %>').classList.contains("edited")) {
    document.querySelector('.answer_<%= @answer.id %>').classList.remove("edited")
  }
  document.querySelector('#jumbotron-form-inline-<%= @answer.id %>').classList.remove('hide')
  document.querySelector('#jumbotron-<%= @answer.id %> li').classList.add('hide')
  document.querySelector('#answer-info_<%= @answer.id %>').classList.add('hide')
  if (linkSection) {
    document.querySelector('#answer-link_<%= @answer.id %>').classList.add('hide')
  }
  document.querySelector('#button-edit-answer-<%= @answer.id %>').classList.add('hide')
  document.querySelector('#button-delete-answer-<%= @answer.id %>').classList.add('hide')
  if (bestButton) {
    document.querySelector('#button-best-answer-<%= @answer.id %>').classList.add('hide')
  }
}


function revertJumbotronForm() {
  if (document.querySelector('.answer_<%= @answer.id %>').classList.contains("edited")) {
    document.querySelector('.answer_<%= @answer.id %>').classList.remove("edited")
  }
  document.querySelector('#jumbotron-form-inline-<%= @answer.id %>').classList.add('hide')
  document.querySelector('#jumbotron-<%= @answer.id %> li').classList.remove('hide')
  document.querySelector('#answer-info_<%= @answer.id %>').classList.remove('hide')
  if (linkSection) {
    document.querySelector('#answer-link_<%= @answer.id %>').classList.remove('hide')
  }
  document.querySelector('#button-edit-answer-<%= @answer.id %>').classList.remove('hide')
  document.querySelector('#button-delete-answer-<%= @answer.id %>').classList.remove('hide')
  if (bestButton) {
    document.querySelector('#button-best-answer-<%= @answer.id %>').classList.remove('hide')
  }
}
